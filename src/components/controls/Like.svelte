<script lang="ts">
	import { addLike, isFavorite } from "@/interact/user"
	import { year } from "@/stores/date"

    let isLiked = false;

    $: {
        isLiked = isFavorite($year);
    }

    const handleLike = () => {
        isLiked = !isLiked;
        addLike();
    }

</script>

<button class="control like" on:click={handleLike}>
    {#if isLiked}
        <svg xmlns="http://www.w3.org/2000/svg" width="35px" height="35px" viewBox="0 0 32 32"><g fill="none"><path fill="url(#f2075id0)" d="M15.217 29.202a1.732 1.732 0 0 0 1.71-.023c3.584-2.047 9.81-6.761 12.255-12.884c3.59-7.973-4.838-14.337-10.662-9.76c-.608.478-1.372 1.025-1.897 1.542c-.238.234-.657.258-.904.034c-.69-.63-1.771-1.436-2.465-1.905c-4.965-3.36-14 1.069-10.146 10.52c1.412 4.242 8.14 10.26 12.109 12.476"/><path fill="url(#f2075id1)" d="M15.217 29.202a1.732 1.732 0 0 0 1.71-.023c3.584-2.047 9.81-6.761 12.255-12.884c3.59-7.973-4.838-14.337-10.662-9.76c-.608.478-1.372 1.025-1.897 1.542c-.238.234-.657.258-.904.034c-.69-.63-1.771-1.436-2.465-1.905c-4.965-3.36-14 1.069-10.146 10.52c1.412 4.242 8.14 10.26 12.109 12.476"/><path fill="url(#f2075id2)" d="M15.217 29.202a1.732 1.732 0 0 0 1.71-.023c3.584-2.047 9.81-6.761 12.255-12.884c3.59-7.973-4.838-14.337-10.662-9.76c-.608.478-1.372 1.025-1.897 1.542c-.238.234-.657.258-.904.034c-.69-.63-1.771-1.436-2.465-1.905c-4.965-3.36-14 1.069-10.146 10.52c1.412 4.242 8.14 10.26 12.109 12.476"/><path fill="url(#f2075id3)" d="M15.217 29.202a1.732 1.732 0 0 0 1.71-.023c3.584-2.047 9.81-6.761 12.255-12.884c3.59-7.973-4.838-14.337-10.662-9.76c-.608.478-1.372 1.025-1.897 1.542c-.238.234-.657.258-.904.034c-.69-.63-1.771-1.436-2.465-1.905c-4.965-3.36-14 1.069-10.146 10.52c1.412 4.242 8.14 10.26 12.109 12.476"/><path fill="url(#f2075idd)" d="M15.217 29.202a1.732 1.732 0 0 0 1.71-.023c3.584-2.047 9.81-6.761 12.255-12.884c3.59-7.973-4.838-14.337-10.662-9.76c-.608.478-1.372 1.025-1.897 1.542c-.238.234-.657.258-.904.034c-.69-.63-1.771-1.436-2.465-1.905c-4.965-3.36-14 1.069-10.146 10.52c1.412 4.242 8.14 10.26 12.109 12.476"/><path fill="url(#f2075ide)" d="M15.217 29.202a1.732 1.732 0 0 0 1.71-.023c3.584-2.047 9.81-6.761 12.255-12.884c3.59-7.973-4.838-14.337-10.662-9.76c-.608.478-1.372 1.025-1.897 1.542c-.238.234-.657.258-.904.034c-.69-.63-1.771-1.436-2.465-1.905c-4.965-3.36-14 1.069-10.146 10.52c1.412 4.242 8.14 10.26 12.109 12.476"/><path fill="url(#f2075id4)" fill-opacity="0.6" d="M15.217 29.202a1.732 1.732 0 0 0 1.71-.023c3.584-2.047 9.81-6.761 12.255-12.884c3.59-7.973-4.838-14.337-10.662-9.76c-.608.478-1.372 1.025-1.897 1.542c-.238.234-.657.258-.904.034c-.69-.63-1.771-1.436-2.465-1.905c-4.965-3.36-14 1.069-10.146 10.52c1.412 4.242 8.14 10.26 12.109 12.476"/><g filter="url(#f2075id7)"><path fill="#fa1c56" d="M15.908 10.54v6.823c0 .905 1.096 1.334 1.66.627c1.745-2.19 3.153-4.851 1.582-7.025c-.602-.834-1.756-1.368-2.699-1.198c-.352.063-.543.415-.543.774"/></g><g filter="url(#f2075id8)"><ellipse cx="24.663" cy="11.377" fill="url(#f2075id5)" rx="4.462" ry="3.7" transform="rotate(-44.19 24.663 11.377)"/></g><g filter="url(#f2075id9)"><ellipse cx="23.46" cy="6.067" fill="#ff7383" rx="1.693" ry=".356" transform="rotate(7.165 23.46 6.067)"/></g><g filter="url(#f2075ida)"><ellipse cx="9.389" cy="6.053" fill="#ff93ba" fill-opacity="0.5" rx="1.519" ry=".249" transform="rotate(-.697 9.389 6.053)"/></g><g filter="url(#f2075idb)"><path fill="url(#f2075id6)" d="m14.845 9.962l.313 10.25C8.283 13.524 6.96 8.828 9.595 7.774c2.5-1 4.5.625 5.25 2.188"/></g><g filter="url(#f2075idc)"><path fill="#ff7383" d="M14.345 9.362c-.84-.12-1.1-.817-1.125-1.15c.48.5.95.542 1.125.5z"/></g><defs><radialGradient id="f2075id0" cx="0" cy="0" r="1" gradientTransform="matrix(0 22.9845 -24.4021 0 15.883 5.634)" gradientUnits="userSpaceOnUse"><stop stop-color="#fc0000"/><stop offset=".528" stop-color="#ff3b79"/><stop offset="1" stop-color="#f724b3"/></radialGradient><radialGradient id="f2075id1" cx="0" cy="0" r="1" gradientTransform="matrix(-14.87866 15.19253 -28.45705 -27.86914 23.025 11.363)" gradientUnits="userSpaceOnUse"><stop offset=".798" stop-color="#c82092" stop-opacity="0"/><stop offset=".908" stop-color="#c82092"/></radialGradient><radialGradient id="f2075id2" cx="0" cy="0" r="1" gradientTransform="matrix(-21.1897 -8.27729 11.70114 -29.9547 19.997 17.789)" gradientUnits="userSpaceOnUse"><stop offset=".41" stop-color="#b91d43" stop-opacity="0"/><stop offset=".834" stop-color="#b91d43"/></radialGradient><radialGradient id="f2075id3" cx="0" cy="0" r="1" gradientTransform="rotate(90 .872 14.688)scale(19.7992)" gradientUnits="userSpaceOnUse"><stop offset=".671" stop-color="#ff7af2" stop-opacity="0"/><stop offset=".934" stop-color="#ffbce6"/></radialGradient><radialGradient id="f2075id4" cx="0" cy="0" r="1" gradientTransform="matrix(-16.59795 4.56623 -4.82236 -17.52896 18.347 12.896)" gradientUnits="userSpaceOnUse"><stop offset=".802" stop-color="#ff73a6" stop-opacity="0"/><stop offset="1" stop-color="#ff93ba"/></radialGradient><radialGradient id="f2075id5" cx="0" cy="0" r="1" gradientTransform="rotate(172.927 14.212 6.526)scale(7.29137 9.69562)" gradientUnits="userSpaceOnUse"><stop stop-color="#ff7383"/><stop offset="1" stop-color="#ff7383" stop-opacity="0"/></radialGradient><radialGradient id="f2075id6" cx="0" cy="0" r="1" gradientTransform="matrix(-9.06248 -8.87742 15.75895 -16.08745 16.345 13.84)" gradientUnits="userSpaceOnUse"><stop stop-color="#ff6274"/><stop offset="1" stop-color="#ff6274" stop-opacity="0"/></radialGradient><filter id="f2075id7" width="7.923" height="12.608" x="13.908" y="7.735" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"/><feGaussianBlur result="effect1_foregroundBlur_7305_6094" stdDeviation="1"/></filter><filter id="f2075id8" width="11.219" height="11.176" x="19.054" y="5.789" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"/><feGaussianBlur result="effect1_foregroundBlur_7305_6094" stdDeviation=".75"/></filter><filter id="f2075id9" width="7.36" height="4.823" x="19.78" y="3.656" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"/><feGaussianBlur result="effect1_foregroundBlur_7305_6094" stdDeviation="1"/></filter><filter id="f2075ida" width="6.037" height="3.5" x="6.37" y="4.303" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"/><feGaussianBlur result="effect1_foregroundBlur_7305_6094" stdDeviation=".75"/></filter><filter id="f2075idb" width="12.825" height="18.745" x="5.333" y="4.467" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"/><feGaussianBlur result="effect1_foregroundBlur_7305_6094" stdDeviation="1.5"/></filter><filter id="f2075idc" width="3.125" height="3.15" x="12.22" y="7.212" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"/><feGaussianBlur result="effect1_foregroundBlur_7305_6094" stdDeviation=".5"/></filter><linearGradient id="f2075idd" x1="17.745" x2="25.758" y1="16.133" y2="25.669" gradientUnits="userSpaceOnUse"><stop offset=".694" stop-color="#ff7af2" stop-opacity="0"/><stop offset=".934" stop-color="#ffbce6"/></linearGradient><linearGradient id="f2075ide" x1="16.752" x2="7.349" y1="16.53" y2="27.125" gradientUnits="userSpaceOnUse"><stop offset=".694" stop-color="#ff7af2" stop-opacity="0"/><stop offset=".934" stop-color="#ffbce6"/></linearGradient></defs></g></svg>
    {:else}
        <svg xmlns="http://www.w3.org/2000/svg" width="35px" height="35px" viewBox="0 0 256 256"><path fill="currentColor" d="M178 34c-21 0-39.26 9.47-50 25.34C117.26 43.47 99 34 78 34a60.07 60.07 0 0 0-60 60c0 29.2 18.2 59.59 54.1 90.31a334.68 334.68 0 0 0 53.06 37a6 6 0 0 0 5.68 0a334.68 334.68 0 0 0 53.06-37C219.8 153.59 238 123.2 238 94a60.07 60.07 0 0 0-60-60m-50 175.11C111.59 199.64 30 149.72 30 94a48.05 48.05 0 0 1 48-48c20.28 0 37.31 10.83 44.45 28.27a6 6 0 0 0 11.1 0C140.69 56.83 157.72 46 178 46a48.05 48.05 0 0 1 48 48c0 55.72-81.59 105.64-98 115.11"/></svg>
    {/if}
	<span>{isLiked ? "Unlike this year" : "Like this year"}</span>
</button>

<style lang="sass">
    .like
        span 
            color: var(--stress-color)
            display: none

        &:hover 
            span
                display: block
            :global(path)
                fill: var(--stress-color)
</style>